<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  
  <title>Olho de LCD com Arduino e Nokia 5110 - #sucesso</title>
<link href="./theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
<link href="./" type="application/atom+xml" rel="alternate" title="Só mais um Carneiro ATOM Feed" />
  
  <!--[if IE]>
  <style type="text/css"> 
  .twoColFixRtHdr #mainContent { zoom: 1; }
  </style>
  <![endif]-->

</head>

<body>

<div id="container">

  <div id="header">
  <h1><a href=".">Só mais um Carneiro</h1>
  
  </div><!-- end #header -->
  
  <div id="topMenu">
  
    <ul>
    	<li><a href=".">Início</a></li>
        <li>&ndash;</li>
        <li><a href="./archives.html">Arquivo</a></li>
        
    </ul>
  
  </div><!-- end #topMenu -->

  <div id="sidebar">
    <div style="height:120px">&nbsp;</div>
	<h3>Páginas</h3>
	<ul>
	</ul>
		<h3>Diga-me com quem andas...</h3>
		<ul>
                    <li><a href="http://calango.club/">Calango Hacker Clube</a></li>
                    <li><a href="http://www.blogdoje.com.br/">Jerônimo</a></li>
                    <li><a href="http://tecno-artesanato.tumblr.com/">Phil Jones</a></li>
                    <li><a href="http://getpelican.com/">Pelican</a></li>
                    <li><a href="http://python.org/">Python.org</a></li>
		</ul>
        <h3>Tags</h3>
        <ul>
                <li><a href="./tag/educacao.html">educação</a></li>
                <li><a href="./tag/cidadania.html">cidadania</a></li>
                <li><a href="./tag/raspberry-pi.html">raspberry pi</a></li>
                <li><a href="./tag/minecraft.html">minecraft</a></li>
                <li><a href="./tag/python.html">python</a></li>
                <li><a href="./tag/dados-abertos.html">dados abertos</a></li>
                <li><a href="./tag/linux.html">linux</a></li>
                <li><a href="./tag/debian.html">debian</a></li>
        </ul>
    
  
  </div><!-- end #sidebar -->

  <div id="mainContent">
  	
 


<div class="blogItem">
    
      <h2><a href="./Olho-de-LCD-com-Arduino-e-Nokia-5110---#sucesso.html">Olho de LCD com Arduino e Nokia 5110 - #sucesso</a></h2>
      <h3>Sex 31 janeiro 2014</h3>
      
  <p>E... voilá!!</p>
<div class="separator" style="clear: both; text-align: center;">

[![](http://4.bp.blogspot.com/-82HN7wKNFXo/UuxF6m8PLrI/AAAAAAAABs4/o3nLdRZuYKw/s1600/DSC02797.JPG)](http://4.bp.blogspot.com/-82HN7wKNFXo/UuxF6m8PLrI/AAAAAAAABs4/o3nLdRZuYKw/s1600/DSC02797.JPG)

</div>

<p>Consegui fazer o Olho de LCD usando um <a href="http://umcarneiro.blogspot.com/2014/01/lcd-nokia-5110-com-arduino-sucesso.html">display Nokia
5110</a>
e o Arduino!!!</p>
<div class="separator" style="clear: both; text-align: center;">

</div>

<div class="separator" style="clear: both; text-align: center;">

[![](http://2.bp.blogspot.com/-V05JiDFm7vU/UuxF6t_b0qI/AAAAAAAABsw/2AHaPcQlEvU/s1600/DSC02796.JPG)](http://2.bp.blogspot.com/-V05JiDFm7vU/UuxF6t_b0qI/AAAAAAAABsw/2AHaPcQlEvU/s1600/DSC02796.JPG)

</div>

<p>De início eu havia pensado em gerar um arquivo bitmap (BMP) e
convertê-lo depois em código usando uma ferramenta automatizada. Ou pelo
menos foi o que eu escrevi que ia fazer <a href="http://umcarneiro.blogspot.com/2014/01/criando-um-bitmap-para-lcd-grafico.html">no meu último
post</a>...</p>
<p>Acabei fazendo uma coisa bem <span
style="font-family: inherit;">dif</span>erente... Foi um trabalho mais
braçal, mas deu certo.</p>
<p><a href="http://1.bp.blogspot.com/-Mgb9Rl8rqPQ/UuxF543rKCI/AAAAAAAABsg/wia-ich872Q/s1600/DSC02794.JPG"><img alt="" src="http://1.bp.blogspot.com/-Mgb9Rl8rqPQ/UuxF543rKCI/AAAAAAAABsg/wia-ich872Q/s1600/DSC02794.JPG" /></a>Primeiro,
marquei com uma canetinha vermelha as divisas das linhas do display, a
cada 8 quadradinhos. O display recebe os dados a exibir na forma de
bytes. Cada byte contém oito bits, então os dados chegam ao display na
forma de linhas com oito bits de espessura. Foram essas linhas que
marquei.</p>
<p>Para cada um<span style="font-size: small;"><span
style="font-family: Times,&quot;Times New Roman&quot;,serif;">a
das</span></span> 6 linhas, montei uma sequência de bytes. Para ficar
bem claro no código, escrevi os bytes usando o sistema binário, assim:</p>
<p>``` {style="background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px;"}
0b00000000 //uma linha em branco0b11111111 //uma linha preta</p>
<div class="highlight"><pre>O &quot;0b&quot; no início diz ao Arduino que estou usando o sistema binário, ou
seja, só zeros e uns.<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;font-size: small;&quot;</span><span class="nt">&gt;&lt;span</span>
<span class="na">style=</span><span class="s">&quot;font-family: Georgia,&amp;quot;Times New Roman&amp;quot;,serif;&quot;</span><span class="nt">&gt;</span>  
<span class="nt">&lt;/span&gt;&lt;/span&gt;</span>Tive que escrever o correspondente de 0 ou 1 para cada
quadradinho da grade que forma o display. Ou seja, 84 x 48 = 4032. Claro
que usei um bocado de Ctrl + C, Ctrl + V e escrevi em linhas de 8 bits,
então foram apenas 504 linhas de código para descrever o desenho... ;)O
código inteiro está aí embaixo, usem à vontade!

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;separator&quot;</span> <span class="na">style=</span><span class="s">&quot;clear: both; text-align: center;&quot;</span><span class="nt">&gt;</span>

[![](http://1.bp.blogspot.com/-fp_48NTgub8/UuxF5SABisI/AAAAAAAABsc/Q0etofnNBZo/s1600/DSC02793.JPG)](http://1.bp.blogspot.com/-fp_48NTgub8/UuxF5SABisI/AAAAAAAABsc/Q0etofnNBZo/s1600/DSC02793.JPG)

<span class="nt">&lt;/div&gt;</span>

Se fizerem melhorias para ele olhar para os lados, piscar, etc, por
favor compartilhem! Eu quero fazer isso também, mas se forem mais
rápidos que eu, vai me poupar um bocado de trabalho!

Abraços!

``` {style=&quot;background-color: #eeeeee; border: 1px dashed #999999; color: black; font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;&quot;}
//Olho de LCD - v1//Controlador de Display LCD Nokia 5110 (84x48 pixels)//em 31 de janeiro de 2014//Mais informacoes: umcarneiro.blogspot.com//Licenca: MIT (use como quiser!)//Pinos utilizados no arduino#define PIN_SCE   7  //pino 2 do display#define PIN_RESET 6  //pino 1 do display#define PIN_DC    5  //pino 3 do display#define PIN_SDIN  4  //pino 4 do display#define PIN_SCLK  3  //pino 5 do display//Tamanho do LCD em pixels:#define LCD_X     84#define LCD_Y     48byte linhaUm[84] = {      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //5      0b00000000,      0b00000001,      0b00000010,      0b00000100,      0b00000100,  //10      0b00001000,      0b00001000,      0b00010000,      0b00100000,      0b00100000,  //15      0b00100000,      0b01000000,      0b01000000,      0b01000000,      0b01000000,  //20      0b01000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //25      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //30      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //35      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //40      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //45      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //50      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //55      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b10000000,  //60      0b10000000,      0b10000000,      0b10000000,      0b10000000,      0b01000000,  //65      0b01000000,      0b00100000,      0b00100000,      0b00010000,      0b00010000,  //70      0b00001000,      0b00001000,      0b00000100,      0b00000010,      0b00000010,  //75      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //80      0b00000000,      0b00000000,      0b00000000,      0b00000000};byte linhaDois[84] = {      0b00000000,      0b00000011,      0b00001100,      0b00110000,      0b01000000,  //5      0b10000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //10      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //15      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //20      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //25      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //30      0b00000000,      0b00000000,      0b00000001,      0b00000011,      0b00000111,  //35      0b00000111,      0b00001111,      0b00001111,      0b00001110,      0b00011110,  //40      0b00011111,      0b00011111,      0b00011111,      0b00011111,      0b00011111,  //45      0b00011111,      0b00011111,      0b00011111,      0b00011111,      0b00011111,  //50      0b00011111,      0b00011111,      0b00011111,      0b00011111,      0b00011111,  //55      0b00011111,      0b00011111,      0b00011111,      0b00001111,      0b00001111,  //60      0b00001111,      0b00001111,      0b00001111,      0b00001111,      0b00000111,  //65      0b00000111,      0b00000011,      0b00000001,      0b00000000,      0b00000000,  //70      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //75      0b00000000,      0b10000000,      0b01000000,      0b00100000,      0b00010000,  //80      0b00001000,      0b00000110,      0b00000001,      0b00000000};byte linhaTres[84] = {      0b11111111,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //5      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //10      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //15      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //20      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //25      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00001111,  //30      0b00111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //35      0b10001111,      0b00000111,      0b00000111,      0b00000011,      0b00000011,  //40      0b00000011,      0b00000111,      0b00001111,      0b11111111,      0b11111111,  //45      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //50      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //55      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //60      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //65      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b00111111,  //70      0b00001111,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //75      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //80      0b00000000,      0b00000000,      0b10000000,      0b01111111};byte linhaQuatro[84] = {      0b11111000,      0b00000110,      0b00000001,      0b00000000,      0b00000000,  //5      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //10      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //15      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //20      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //25      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b11100000,  //30      0b11111000,      0b11111100,      0b11111111,      0b11111111,      0b11111111,  //35      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //40      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //45      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //50      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //55      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111111,  //60      0b11111111,      0b11111111,      0b11111111,      0b11111001,      0b11111001,  //65      0b11111111,      0b11111111,      0b11111111,      0b11111111,      0b11111110,  //70      0111111000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //75      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //80      0b00000000,      0b00000000,      0b00001111,      0b11110000};byte linhaCinco[84] = {      0b00000000,      0b00000000,      0b00000000,      0b11000000,      0b00110000,  //5      0b00001100,      0b00000010,      0b00000001,      0b00000000,      0b00000000,  //10      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //15      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //20      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //25      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //30      0b00000000,      0b00000000,      0b00000000,      0b10000000,      0b11000000,  //35      0b11000000,      0b11100000,      0b11100000,      0b11110000,      0b11110000,  //40      0b11110000,      0b11111000,      0b11111000,      0b11111000,      0b11111000,  //45      0b11111000,      0b11111000,      0b11111000,      0b11111000,      0b11111000,  //50      0b11111000,      0b11111000,      0b11111000,      0b11111000,      0b11111000,  //55      0b11111000,      0b11111000,      0b11111000,      0b11111000,      0b11111000,  //60      0b11110000,      0b11110000,      0b11110000,      0b11110000,      0b11100000,  //65      0b11100000,      0b11000000,      0b11000000,      0b10000000,      0b00000000,  //70            0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //75      0b00000000,      0b00000000,      0b00000000,      0b00000011,      0b00000100,  //80      0b00011000,      0b01100000,      0b10000000,      0b00000000};byte linhaSeis[84] = {      0b00000000,      0b00000000,      0b00000000,      0b00000000,      0b00000000,  //5      0b00000000,      0b00000000,      0b00000000,      0b10000000,      0b01000000,  //10      0b00100000,      0b00010000,      0b00010000,      0b00001000,      0b00001000,  //15      0b00001000,      0b00000100,      0b00000100,      0b00000100,      0b00000010,  //20      0b00000010,      0b00000010,      0b00000010,      0b00000010,      0b00000001,  //25      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //30      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //35      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //40      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //45      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //50      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //55      0b00000001,      0b00000001,      0b00000001,      0b00000001,      0b00000001,  //60      0b00000001,      0b00000001,      0b00000001,      0b00000010,      0b00000010,  //65      0b00000010,      0b00000010,      0b00000010,      0b00000010,      0b00000100,  //70      0b00000100,      0b00000100,      0b00001000,      0b00010000,      0b00100000,  //75      0b00100000,      0b01000000,      0b10000000,      0b00000000,      0b00000000,  //80      0b00000000,      0b00000000,      0b00000000,      0b00000000};void setup(void){  pinMode(PIN_SCE, OUTPUT);   // Inicializa os pinos...  pinMode(PIN_RESET, OUTPUT);  pinMode(PIN_DC, OUTPUT);  pinMode(PIN_SDIN, OUTPUT);  pinMode(PIN_SCLK, OUTPUT);  digitalWrite(PIN_RESET, LOW); //RESET no controlador  digitalWrite(PIN_RESET, HIGH);  LcdWrite(LOW, 0x21 );  // Function set: PD=0 (On); V=0 (Horizontal); H=1 (Extended instruction set)  LcdWrite(LOW, 0xBA );  // Define o LCD Vop (Contraste). //XXXXXXXXXXXXXXX  LcdWrite(LOW, 0x04 );  // Define o coeficiente de temperatura (??)  LcdWrite(LOW, 0x14 );  // LCD bias mode 1:48  (??)  LcdWrite(LOW, 0x20 );  // Function set: PD=0 (On); V=0 (Horizontal); H=0 (Basic instruction set)  LcdWrite(LOW, 0x0C );  // Display control = 10 (Normal)   limpaTela();   desenhaLinha(linhaSeis);  desenhaLinha(linhaCinco);  desenhaLinha(linhaQuatro);  desenhaLinha(linhaTres);  desenhaLinha(linhaDois);  desenhaLinha(linhaUm);   } void limpaTela(void) {  //Percorre todas as posicoes  for (int index = 0; index <span class="nt">&lt; LCD_X</span> <span class="err">*</span> <span class="err">LCD_Y</span> <span class="err">/</span> <span class="err">8;</span> <span class="err">index++)</span>  <span class="err">{</span>    <span class="err">LcdWrite(HIGH,</span> <span class="err">0);</span>  <span class="err">}}void</span> <span class="err">desenhaLinha(byte</span> <span class="err">linha[])</span> <span class="err">{</span>  <span class="err">//Percorre</span> <span class="err">as</span> <span class="err">colunas</span>  <span class="err">for</span> <span class="err">(int</span> <span class="na">coluna =</span> <span class="s">0;</span> <span class="err">coluna</span> <span class="err">&lt;</span> <span class="err">LCD_X;</span> <span class="err">coluna++)</span>  <span class="err">{</span>    <span class="err">LcdWrite(HIGH,</span> <span class="err">linha[coluna]);</span>  <span class="err">}}//Cuida</span> <span class="err">da</span> <span class="err">burocracia:</span> <span class="err">envia</span> <span class="err">o</span> <span class="err">comando</span> <span class="err">ou</span> <span class="err">dado</span> <span class="err">seguindo</span> <span class="err">o</span> <span class="err">protocolo</span> <span class="err">do</span> <span class="err">chipvoid</span> <span class="err">LcdWrite(byte</span> <span class="err">dc,</span> <span class="err">byte</span> <span class="err">data){</span>  <span class="err">digitalWrite(PIN_DC,</span> <span class="err">dc);</span> <span class="err">//define</span> <span class="err">se</span> <span class="err">vai</span> <span class="err">mandar</span> <span class="err">dado</span> <span class="err">ou</span> <span class="err">comando</span>  <span class="err">digitalWrite(PIN_SCE,</span> <span class="err">LOW);</span> <span class="err">//ativa</span> <span class="err">o</span> <span class="err">chip</span> <span class="err">para</span> <span class="err">receber</span> <span class="err">dados</span>  <span class="err">shiftOut(PIN_SDIN,</span> <span class="err">PIN_SCLK,</span> <span class="err">MSBFIRST,</span> <span class="err">data);</span> <span class="err">//envia</span> <span class="err">um</span> <span class="err">bit</span> <span class="err">de</span> <span class="err">cada</span> <span class="err">vez,</span> <span class="err">comecando</span> <span class="err">pela</span> <span class="err">esquerda</span>  <span class="err">digitalWrite(PIN_SCE,</span> <span class="err">HIGH);</span> <span class="err">//desativa</span> <span class="err">o</span> <span class="err">envio</span> <span class="err">de</span> <span class="err">dados}void</span> <span class="err">loop(void){</span>    <span class="err">//nada}</span>
</pre></div>


<p>Você pode ver todas as etapas deste projeto usando <a href="http://umcarneiro.blogspot.com.br/search/label/olho_de_lcd">este
link</a>, ou
clicando no marcador
"<a href="http://umcarneiro.blogspot.com.br/search/label/olho_de_lcd">olho_de_lcd</a>",
abaixo.</p>	
      
      <h3 class="blogMeta"></h3>
    
    </div><!-- end #blogItem -->
				
				<!-- end #content -->
  
  </div><!-- end #mainContent -->

<div class="clearfloat"></div>

  <div id="footer">
    <p>Orgulhosamente movido a <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, que roda em <a href="http://python.org">python</a>.
  </div><!-- end #footer -->

</div><!-- end #container -->
</body>
</html>